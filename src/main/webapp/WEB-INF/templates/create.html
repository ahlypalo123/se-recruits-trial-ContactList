<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <title>{{ i18n("messages", "titleCreate") }}</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"/>
        <link href="../../resources/css/create.css" rel="stylesheet"/>
        <script type="text/javascript" src="../../resources/js/getContactRequest.js"></script>
        <script type="text/javascript">
            var i18n = {
                add: "{{ i18n('messages', 'add') }}",
                edit: "{{ i18n('messages', 'edit') }}",
                success: "{{ i18n('messages', 'success') }}",
                invInp: "{{ i18n('messages', 'invInp') }}",
                error: "{{ i18n('messages', 'error') }}",
                reqFail: "{{ i18n('messages', 'reqFail') }}"
            };

            var id = "{{id}}";

            var requestURL;
            var method;
            var contactAction;

            getContactRequest(id);

            if(id) {
                requestURL = "/contacts/" + id + "/edit";
                method = "PUT";
                contactAction = i18n.edit;
            } else {
                requestURL = "/contacts/save";
                method = "POST";
                contactAction = i18n.add;
            }
            document.querySelector("#add-contact").innerHTML = contactAction;
        </script>
        <script src="../../resources/js/imageChecking.js"></script>
        <script id="saveWindow" src="../../resources/js/saveContactRequest.js"></script>

    </head>
    <body>
        <h2>{{ i18n("messages", "titleCreate") }}</h2>

        <div class="container-form">
            <div class="form-group row">
                <img onclick="checkImage()" class="rounded-circle check-image" src="http://powerfulmoneymagnet.com/wp-content/uploads/2017/11/blank_headshot-2.jpg" width="100" height="100"/>
                <div class="alert alert-success" role="alert">
                    {{ i18n("messages", "viewImg") }}
                </div>
            </div>
        </div>

        <div class="container-form">
            <form class="contact-form">
                <div class="form-group row">
                    <label for="image" class="col-sm-2 col-form-label">{{ i18n("messages", "contactImage") }}:</label>
                    <div class="col-sm-10">
                        <input name="image" type="text" class="form-control" id="image" placeholder="URL"/>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="name" class="col-sm-2 col-form-label">{{ i18n("messages", "contactName") }}:</label>
                    <div class="col-sm-10">
                        <input name="name" type="text" class="form-control" id="name" placeholder="Имя контакта"/>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="phone" class="col-sm-2 col-form-label">{{ i18n("messages", "contactPhone") }}:</label>
                    <div class="col-sm-10">
                        <input name="phone" type="text" class="form-control" id="phone" placeholder="Телефон"/>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="description" class="col-sm-2 col-form-label">{{ i18n("messages", "contactDescription") }}:</label>
                    <div class="col-sm-10">
                        <textarea  name="description" class="form-control" id="description" placeholder="Описание"></textarea>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="offset-sm-2 col-sm-10">
                        <button type="reset" id="reset" class="btn btn-primary">{{ i18n("messages", "update") }}</button>
                        <a class="btn btn-primary" id="cancel" href="/contacts">{{ i18n("messages", "cancel") }}</a>
                    </div>
                </div>
            </form>
            <button class="btn btn-primary contact-submit" id="add-contact" onclick="saveContactRequest()">...</button>
        </div>
    </body>
</html>